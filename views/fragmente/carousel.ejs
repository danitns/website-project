<%
function getRandomIndexes(x) {
    // Create an array with indexes from 0 to x
    var indexes = Array.from({ length: x + 1 }, (_, index) => index);

    // Shuffle the array using the Fisher-Yates algorithm
    for (var i = indexes.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = indexes[i];
        indexes[i] = indexes[j];
        indexes[j] = temp;
    }

    // Return the first 5 indexes
    return indexes.slice(0, 5);
}
var len = 17;
var indx = getRandomIndexes(len);
function generateRandomIndexes() {
    indx = getRandomIndexes(len);
}
setInterval(generateRandomIndexes, 15000);
 %>

<div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="2000">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-100" src="/resurse/imagini/produse/<%-locals.produse[indx[0]].poza%>" alt="First slide">
            <div class="carousel-caption d-none d-md-block">
                <h4><%-locals.produse[indx[0]].marca%> <%-locals.produse[indx[0]].model%></h4>
            </div>
        </div>
        <%
        for(let i = 1; i < 5; i++) {%>
        <div class="carousel-item">
            <img class="d-block w-100" src="/resurse/imagini/produse/<%-locals.produse[indx[i]].poza%>" alt="Second slide">
            <div class="carousel-caption d-none d-md-block">
                <h4><%-locals.produse[indx[i]].marca%> <%-locals.produse[indx[i]].model%></h4>
            </div>
        </div>
        <%}%>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>